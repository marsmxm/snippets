setwd("~/learn/snippets/r-prog/Assignment1")
library("stringr")
library("readr")
source("complete.R")
corr <- function(directory, threshold = 0) {
cors <- rep(NA, 332)
for (monitor in 1:332) {
# print(paste("Processing: ", monitor, sep = ""))
filename <- str_interp("${directory}/$[03d]{monitor}.csv")
table <- read_csv(filename, col_types = "Dddi")
s_data <- table[["sulfate"]]
n_data <- table[["nitrate"]]
sc <- s_data[!is.na(s_data) & !is.na(n_data)]
nc <- n_data[!is.na(s_data) & !is.na(n_data)]
s_n_cor <- cor(sc, nc)
if (!is.na(s_n_cor) & s_n_cor > threshold) {
cors[[monitor]] <- s_n_cor
}
}
cors[!is.na(cors)]
}
complete("specdata")
c_data = complete("specdata")
c_data$nobs > 200
c_data[1]
c_data$nobs[c_data$nobs > 200]
c_data$id[c_data$nobs > 200]
library("stringr")
library("readr")
source("complete.R")
corr <- function(directory, threshold = 0) {
c_data <- complete("specdata")
ids <- c_data$id[c_data$nobs > threshold]
cors <- rep(NA, length(ids))
index <- 0
for (monitor in ids) {
index <- index + 1
# print(paste("Processing: ", monitor, sep = ""))
filename <- str_interp("${directory}/$[03d]{monitor}.csv")
table <- read_csv(filename, col_types = "Dddi")
s_data <- table[["sulfate"]]
n_data <- table[["nitrate"]]
sc <- s_data[!is.na(s_data) & !is.na(n_data)]
nc <- n_data[!is.na(s_data) & !is.na(n_data)]
cors[[index]] <- cor(sc, nc)
}
cors
}
cr <- corr("specdata", 150)
head(cr)
summary(cr)
cr <- corr("specdata", 400)
head(cr)
cr <- corr("specdata")
length(cr)
summary(cr)
library(readxl)
学习日报 <- read_excel("~/Desktop/学习日报.xlsx")
View(学习日报)
setwd("~/Desktop")
